<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 7 🎲 Sampling and Probability | Intro to R @ TJ</title>
<meta name="author" content="Kai Sam Ng">
<meta name="description" content="7.1 An overview on probability While a chance process is impossible to predict in the short term, if we observe more and more repetitions of any chance process, the proportion of times that a...">
<meta name="generator" content="bookdown 0.27.3 with bs4_book()">
<meta property="og:title" content="Chapter 7 🎲 Sampling and Probability | Intro to R @ TJ">
<meta property="og:type" content="book">
<meta property="og:description" content="7.1 An overview on probability While a chance process is impossible to predict in the short term, if we observe more and more repetitions of any chance process, the proportion of times that a...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 7 🎲 Sampling and Probability | Intro to R @ TJ">
<meta name="twitter:description" content="7.1 An overview on probability While a chance process is impossible to predict in the short term, if we observe more and more repetitions of any chance process, the proportion of times that a...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link rel="apple-touch-icon" sizes="180x180" href="resources/images/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="resources/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="resources/images/favicon-16x16.png">
<link rel="manifest" href="resources/images/site.webmanifest">
<meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)">
<style>
    #content {
        font-size: 0.98rem;
    }
    </style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/iframe-resizer/3.5.16/iframeResizer.min.js" type="text/javascript"></script><link href="https://cdn.jsdelivr.net/gh/hung1001/font-awesome-pro-v6@18657a9/css/all.min.css" rel="stylesheet" type="text/css">
<style>
    .interactive {
      position: relative;
    }  
    .interactive iframe {
      position: relative;
      z-index: 100;
      border: 0;
      width: 1px;
      min-width: 100%;
    }
    </style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Intro to R @ TJ</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">🏠 Homepage</a></li>
<li class="book-part">Getting Started</li>
<li><a class="" href="installing-r-and-rstudio.html">⬇️ Installing R and RStudio</a></li>
<li><a class="" href="interacting-with-r-studio.html">🖥 Interacting with R Studio</a></li>
<li class="book-part">Working with Data</li>
<li><a class="" href="vectors.html"><span class="header-section-number">1</span> 📑 Vectors</a></li>
<li><a class="" href="dataframe.html"><span class="header-section-number">2</span> 🔢 Creating Dataframes</a></li>
<li><a class="" href="selecting-and-filtering-data.html"><span class="header-section-number">3</span> 👆 Selecting and Filtering Data</a></li>
<li><a class="" href="creating-new-data.html"><span class="header-section-number">4</span> ✨ Creating New Data</a></li>
<li><a class="" href="vectors-and-dataframe-exercises.html">🛠 Vectors and Dataframe Exercises</a></li>
<li class="book-part">Presenting Data</li>
<li><a class="" href="summarizing-data.html"><span class="header-section-number">5</span> 📚 Summarizing Data</a></li>
<li><a class="" href="visualizing-one-variable-data.html"><span class="header-section-number">6</span> 👀 Visualizing One-Variable Data</a></li>
<li><a class="" href="summarizing-and-visualizing-data-exercises.html">🛠 Summarizing and Visualizing Data Exercises</a></li>
<li class="book-part">Sampling and Probability</li>
<li><a class="active" href="sampling-and-probability.html"><span class="header-section-number">7</span> 🎲 Sampling and Probability</a></li>
<li class="book-part">Two-Variable Data: Scatterplots and Regression</li>
<li><a class="" href="scatterplots-and-correlation.html"><span class="header-section-number">8</span> 📈 Scatterplots and Correlation</a></li>
<li><a class="" href="linear-regression.html"><span class="header-section-number">9</span> 🔮 Linear Regression</a></li>
<li><a class="" href="linear-regression-exercises.html">Linear Regression Exercises 🛠</a></li>
<li class="book-part">Sampling Distributions and Confidence Intervals</li>
<li><a class="" href="z-scores-and-the-normal-distribution.html"><span class="header-section-number">10</span> Z-Scores and the Normal Distribution</a></li>
<li><a class="" href="the-central-limit-theorem.html"><span class="header-section-number">11</span> 🎯 The Central Limit Theorem</a></li>
<li><a class="" href="one-proportion-z-interval-for-hatp.html"><span class="header-section-number">12</span> 1️⃣『』 One Proportion Z-Interval for \(\hat{p}\)</a></li>
<li><a class="" href="one-sample-t-interval-for-mu.html"><span class="header-section-number">13</span> 1️⃣『』 One Sample t-Interval for \(\mu\)</a></li>
<li class="book-part">Significance Tests</li>
<li><a class="" href="one-proportion-z-test-for-proportions.html"><span class="header-section-number">14</span> 1️⃣ One Proportion Z-Test for Proportions</a></li>
<li><a class="" href="one-sample-t-test-for-means.html"><span class="header-section-number">15</span> 1️⃣ One-Sample t-test for Means</a></li>
<li><a class="" href="two-sample-confidence-intervals-and-significance-tests.html"><span class="header-section-number">16</span> 2️⃣ Two Sample Confidence Intervals and Significance Tests</a></li>
<li><a class="" href="one-way-anova.html"><span class="header-section-number">17</span> One-Way ANOVA</a></li>
<li class="book-part">Miscellaneous</li>
<li><a class="" href="deciphering-common-r-errors.html">😥 Deciphering Common R Errors</a></li>
<li><a class="" href="wrangling-data.html">Wrangling Data</a></li>
<li><a class="" href="downloading-data-from-the-census-bureau.html">📲️ Downloading Data from the Census Bureau</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/kaisamng/RGuides">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="sampling-and-probability" class="section level1" number="7">
<h1>
<span class="header-section-number">7</span> 🎲 Sampling and Probability<a class="anchor" aria-label="anchor" href="#sampling-and-probability"><i class="fas fa-link"></i></a>
</h1>
<div id="an-overview-on-probability" class="section level2" number="7.1">
<h2>
<span class="header-section-number">7.1</span> An overview on probability<a class="anchor" aria-label="anchor" href="#an-overview-on-probability"><i class="fas fa-link"></i></a>
</h2>
<p>While a chance process is impossible to predict in the short term, if we observe more and more repetitions of any <strong>chance process</strong>, the proportion of times that a specific outcome occurs approaches a single value. This is called <strong>The Law of Large Numbers</strong>.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-113"></span>
<img src="resources/images/08-Sampling-and-Probability/LLN.png" alt="(a) The proportion of heads in the first 20 tosses of a coin. (b) The proportion of heads in the first 500 tosses of a coin." width="100%"><p class="caption">
FIGURE 7.1: (a) The proportion of heads in the first 20 tosses of a coin. (b) The proportion of heads in the first 500 tosses of a coin.
</p>
</div>
<p>Above is the cumulative proportion of tosses for a fair coin. The previous example confirms that the probability of getting a head when we toss a fair coin is 0.5. Probability 0.5 means “occurs half the time in a very large number of trials.” That <strong>doesn’t</strong> mean that you are always guaranteed 50% heads and 50% tails for any number of tosses!</p>
<p>The Law of Large Numbers, therefore, never guarantees a specific outcome when we observe a chance process—rather, it points out that there the proportion <em>trends</em> towards the value that we predict for the chance process.</p>
<div class="rmdnote">
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<ul>
<li>
<span style="text-decoration:underline"><strong>Empirical</strong></span> means something based in observation and experience, rather than theory or logic.</li>
<li>“<strong>Empirical probabilities</strong> come from carrying out a simulation and recording the results. The probability of each event and outcome was the observed relative frequency from the simulation. You found empirical probabilities from Random Babies and Pass the Pigs activity.”</li>
</ul>
</div>
<div>
<ul>
<li>
<span style="text-decoration:underline"><strong>Theoretical</strong></span> means something based in logic, rather than observation.</li>
<li>
<strong>Theoretical probabilities</strong> come from constructing a <strong>sample space.</strong>
</li>
</ul>
</div>
</div>
</div>
<div class="rmdnote">
<div style="display: grid; grid-template-columns: 2fr 1fr; grid-column-gap: 10px;">
<div>
<p>The <span style="text-decoration:underline"><strong>sample space</strong></span> is a list of all possible outcomes.
- For example, when you toss a die, there are six possible outcomes. If the die is fair, then are all equally likely to occur. So, the sample space S for a fair die is <span class="math display">\[S= {1,2,3,4,5,6}.\]</span></p>
</div>
<div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-114"></span>
<img src="resources/images/08-Sampling-and-Probability/dice.png" alt="All possibilities of a six-sided die." width="100%"><p class="caption">
FIGURE 7.2: All possibilities of a six-sided die.
</p>
</div>
</div>
</div>
</div>
<div class="rmdnote">
<p>An <span style="text-decoration:underline"><strong>event</strong></span> is a subset of a sample space.
- For example, the event of “tossing a prime number” in our dice example is the set {2,3,5}. In a sample space with equally likely outcomes, the probability of an event P(E) is <span class="math display">\[P(E)=\frac{\text{Number of Outcomes in the Event}}{\text{Total Number of Outcomes in the Sample Space}}\]</span></p>
<p>So, the theoretical probability of tossing a prime number is <span class="math inline">\(\frac{1}{2}\)</span>.</p>
<p>Finally…</p>
<ul>
<li><p>All events have probabilities between 0 and 1, inclusive.</p></li>
<li><p>The probability of an impossible event is 0.</p></li>
<li><p>The probability of a certain <em>(guaranteed to happen)</em> event is 1.</p></li>
</ul>
</div>
</div>
<div id="performing-simulations" class="section level2" number="7.2">
<h2>
<span class="header-section-number">7.2</span> Performing Simulations<a class="anchor" aria-label="anchor" href="#performing-simulations"><i class="fas fa-link"></i></a>
</h2>
<div id="carrying-out-simulations-in-r-using-sample" class="section level3" number="7.2.1">
<h3>
<span class="header-section-number">7.2.1</span> Carrying out simulations in R using <code>sample()</code><a class="anchor" aria-label="anchor" href="#carrying-out-simulations-in-r-using-sample"><i class="fas fa-link"></i></a>
</h3>
<p>Carrying out a simulation in R is very easy– much easier to do than using a chance process like dice, a random number generator, and so forth. Like all those other processes though, you must first construct <strong>the sample space</strong>.</p>
<p>Let’s simulate the roll of dice. First, I’ll create a new vector that counts from 1 to 6, and store it as <code>dice</code>.</p>
<div class="sourceCode" id="cb147"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dice</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span></span></code></pre></div>
<p>When you run the <code><a href="https://rdrr.io/r/base/sample.html">sample()</a></code> command, R effectively selects an element randomly from the vector– almost like you placed each vector element on its own index card, and you pull one out. This behavior cannot be changed.</p>
<div class="sourceCode" id="cb148"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="va">dice</span>, </span>
<span>       size <span class="op">=</span> <span class="fl">5</span>, </span>
<span>       replace<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 3 1 4 5 6</code></pre>
<p>Here are the parameters, explained:</p>
<ul>
<li>
<code>dice=</code> is the vector that we are sampling from.</li>
<li>
<code>size=</code> is the number of times that we are sampling from this vector. This is the <strong>sample size</strong>.</li>
<li>
<code>replace=</code> tells R whether to sample for replacement. <code>FALSE</code> means sampling <strong>without</strong> replacement. <code>FALSE</code> is the default setting; if you do not specify <code>replace=</code>, it will assume <code>FALSE</code>. What that means is that once R has selected that element, it will exclude that element from the second selection.</li>
</ul>
<p>As you can see, it means that every face of the die is selected exactly once. While this works for 6 index cards labeled 1 to 6, it doesn’t make sense for dice. We know for a fact that numbers can be repeated on a dice.</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p>Replacing with <code>replace=TRUE</code> allows us to properly replicate the chance process of rolling a dice. Here, we roll the dice 7 times. Notice that some numbers repeat.</p>
</div>
<div>
<div class="sourceCode" id="cb150"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="va">dice</span>, </span>
<span>       size <span class="op">=</span> <span class="fl">5</span>, </span>
<span>       replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 5 1 1 2 4</code></pre>
</div>
</div>
<div style="display: grid; grid-template-columns: 2fr 1fr; grid-column-gap: 10px;">
<div>
<p>If you kept <code>replace=FALSE</code>, and selected a <code>size=</code> that was larger than the number of elements in <code>dice</code>, you get an error. If you sample without replacement, and you exclude any elements that have already been selected, you select all elements exactly once with <code>size=6</code>. There are no more elements beyond 6.</p>
</div>
<div style="max-width: 340px;">
<div class="sourceCode" id="cb152"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="va">dice</span>, </span>
<span>       size <span class="op">=</span> <span class="fl">7</span>, </span>
<span>       replace<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Error in sample.int(length(x), size, replace, prob): cannot take a sample larger than the population when 'replace = FALSE'</code></pre>
</div>
</div>
</div>
<div id="sampling-from-a-table-using-slice_sample" class="section level3" number="7.2.2">
<h3>
<span class="header-section-number">7.2.2</span> Sampling from a table using <code>slice_sample()</code><a class="anchor" aria-label="anchor" href="#sampling-from-a-table-using-slice_sample"><i class="fas fa-link"></i></a>
</h3>
<p>Let’s return to our <code>periodic_table</code> data from the previous chapter. Given that each row represented an element (in our case, an <strong>observational unit</strong>), we can use the <code><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_sample()</a></code> function to select different elements at random.</p>
<div class="sourceCode" id="cb154"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_sample</a></span><span class="op">(</span><span class="va">periodic_table</span>, n<span class="op">=</span><span class="fl">5</span>, replace<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre style="max-height: 150px; font-size:10px;"><code>## # A tibble: 5 × 22
##   atomic_number symbol name  name_origin group period block
##           &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;
## 1           116 Lv     Live… Lawrence L…    16      7 p    
## 2           109 Mt     Meit… Lise Meitn…     9      7 d    
## 3            82 Pb     Lead  English wo…    14      6 p    
## 4            30 Zn     Zinc  the German…    12      4 d    
## 5            14 Si     Sili… from the L…    14      3 p    
## # … with 15 more variables: state_at_stp &lt;chr&gt;,
## #   occurrence &lt;chr&gt;, description &lt;chr&gt;,
## #   atomic_weight &lt;dbl&gt;, aw_uncertainty &lt;dbl&gt;,
## #   any_stable_nuclides &lt;chr&gt;, density &lt;dbl&gt;,
## #   density_predicted &lt;lgl&gt;, melting_point &lt;dbl&gt;,
## #   mp_predicted &lt;lgl&gt;, boiling_point &lt;dbl&gt;,
## #   bp_predicted &lt;lgl&gt;, heat_capacity &lt;dbl&gt;, …</code></pre>
<p>The advantage here over using <code>sample(1:118, 5)</code> (since there are 118 rows, and therefore chemical elements, in this table), is that you don’t need to choose the data associated with that observation all over again. You can now work with an columns associated with each sampled row, instead of manually selecting it.</p>
<p>Here’s another example using <a href="summarizing-data.html#dplyr-filter">5.3</a> to do more advanced sampling. In our <code>ChickWeight</code> scenario, we couldn’t just sample each row first, because each row represented a single observation of a chicken by <code>Day</code>. Let’s say I want to sample 5 chickens, on Diet 1, on Day 18:</p>
<div class="sourceCode" id="cb156"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">chicken_sample</span> <span class="op">&lt;-</span> <span class="va">ChickWeight</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">Time</span><span class="op">==</span><span class="fl">18</span>, <span class="va">Diet</span><span class="op">==</span><span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">chicken_sample</span><span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_sample</a></span><span class="op">(</span><span class="va">chicken_sample</span>, n<span class="op">=</span><span class="fl">5</span>, replace<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">chicken_sample</span></span></code></pre></div>
<pre style="max-height: 150px; font-size:10px;"><code>##   weight Time Chick Diet
## 1    248   18    14    1
## 2    199   18     5    1
## 3    160   18     6    1
## 4    184   18    11    1
## 5    185   18    12    1</code></pre>
<p>Now, we can derive a mean weight from our <code>chicken_sample</code> with <code>mean(chicken_sample$weight)</code>.</p>
</div>
<div id="repeating-trials" class="section level3" number="7.2.3">
<h3>
<span class="header-section-number">7.2.3</span> Repeating Trials<a class="anchor" aria-label="anchor" href="#repeating-trials"><i class="fas fa-link"></i></a>
</h3>
<p>R cannot do everything for us. At every point when we design a simulation, we must make choices.</p>
<div class="sourceCode" id="cb158"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="va">dice</span>, </span>
<span>       size <span class="op">=</span> <span class="fl">5</span>, </span>
<span>       replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 2 5 4 2 5</code></pre>
<p>The code above can be interpreted as taking a single dice, and rolling it five times. That means there are <strong>5 trials</strong> with <strong>1 observation</strong> in each trial.</p>
<p>But an alternative interpretation of the code above is that this is <strong>1 trial</strong> where we threw <em>5 dice at once, simultaneously.</em> In this case, it means that, if we want 5 trials, we would have to run the code over and over.</p>
<p>If we were to simulate the probability of throwing multiple dice at once, over multiple trials, we would need to run the <code><a href="https://rdrr.io/r/base/sample.html">sample()</a></code> command over and over. Manually running the command isn’t practical, so we use the <code><a href="https://rdrr.io/r/base/lapply.html">replicate()</a></code> function instead.</p>
<div class="sourceCode" id="cb160"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">simul_5dice_10trials</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">replicate</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="va">dice</span>,size<span class="op">=</span><span class="fl">5</span>,replace<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">simul_5dice_10trials</span></span></code></pre></div>
<pre style="max-height: 150px; font-size:10px;"><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
## [1,]    1    4    6    3    1    5    1    1    4     2
## [2,]    3    3    5    6    2    6    4    4    3     2
## [3,]    1    3    1    4    5    2    1    6    4     5
## [4,]    6    2    5    5    5    2    2    5    2     2
## [5,]    4    2    5    1    5    1    6    5    1     3</code></pre>
<p><code>simul_5dice_10trials</code> represents the simulation of throwing five dice per trial, over ten trials. Therefore, each column represents <strong>one trial</strong>, and each element in the column represents the result of that dice.</p>
</div>
<div id="simulations-practice" class="section level3" number="7.2.4">
<h3>
<span class="header-section-number">7.2.4</span> Simulations Practice<a class="anchor" aria-label="anchor" href="#simulations-practice"><i class="fas fa-link"></i></a>
</h3>
<p><strong>Your turn!</strong> Store the sample space of a 8-sided die into <code>dice_8</code>. Then, run a simulation where you throw two 8-sided dice over 6 trials.</p>
<iframe style="margin:0 auto; min-width: 100%;" id="ch8-sampling-ex" class="interactive" src="https://kaisamng.shinyapps.io/Ch8_Sampling_Ex/" scrolling="no" frameborder="no">
</iframe>
</div>
</div>
<div id="tabluating-using-two-way-tables" class="section level2" number="7.3">
<h2>
<span class="header-section-number">7.3</span> Tabluating using Two-Way Tables<a class="anchor" aria-label="anchor" href="#tabluating-using-two-way-tables"><i class="fas fa-link"></i></a>
</h2>
<p>As we learned in @(table), we can use the <code><a href="https://rdrr.io/r/base/table.html">table()</a></code> function to return the counts of a single quantitative variable. Here’s an example with the <code>diamonds</code> dataset, built into R, which contains the prices and attributes of 54,000 diamonds.</p>
<div class="sourceCode" id="cb162"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">diamonds</span><span class="op">)</span></span></code></pre></div>
<pre style="max-height: 150px; font-size:10px;"><code>## # A tibble: 6 × 10
##   carat cut     color clarity depth table price     x     y
##   &lt;dbl&gt; &lt;ord&gt;   &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1  0.23 Ideal   E     SI2      61.5    55   326  3.95  3.98
## 2  0.21 Premium E     SI1      59.8    61   326  3.89  3.84
## 3  0.23 Good    E     VS1      56.9    65   327  4.05  4.07
## 4  0.29 Premium I     VS2      62.4    58   334  4.2   4.23
## 5  0.31 Good    J     SI2      63.3    58   335  4.34  4.35
## 6  0.24 Very G… J     VVS2     62.8    57   336  3.94  3.96
## # … with 1 more variable: z &lt;dbl&gt;</code></pre>
<p>The <code>diamonds</code> dataset includes multiple cateogorical variables that describe the quality of a diamond, including <code>cut</code>, <code>color</code>, and <code>clairty</code>. It would be very easy to tabulate each variable at once, by selecting each column as a vector.</p>
<div class="sourceCode" id="cb164"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">diamonds</span><span class="op">$</span><span class="va">cut</span><span class="op">)</span></span></code></pre></div>
<pre style="max-height: 150px; font-size:10px;"><code>## 
##      Fair      Good Very Good   Premium     Ideal 
##      1610      4906     12082     13791     21551</code></pre>
<div class="sourceCode" id="cb166"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">diamonds</span><span class="op">$</span><span class="va">color</span><span class="op">)</span></span></code></pre></div>
<pre style="max-height: 150px; font-size:10px;"><code>## 
##     D     E     F     G     H     I     J 
##  6775  9797  9542 11292  8304  5422  2808</code></pre>
<p>We can go further. What if I wanted to know how many diamonds were both <code>cut== "Ideal"</code>and <code>color== "E"</code>? In this case, we can pass both variables into R so it <em>cross-tabulates</em> the data for us.</p>
<div class="sourceCode" id="cb168"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">diamonds</span><span class="op">$</span><span class="va">cut</span>, <span class="va">diamonds</span><span class="op">$</span><span class="va">color</span><span class="op">)</span></span></code></pre></div>
<pre style="max-height: 150px; font-size:10px;"><code>##            
##                D    E    F    G    H    I    J
##   Fair       163  224  312  314  303  175  119
##   Good       662  933  909  871  702  522  307
##   Very Good 1513 2400 2164 2299 1824 1204  678
##   Premium   1603 2337 2331 2924 2360 1428  808
##   Ideal     2834 3903 3826 4884 3115 2093  896</code></pre>
<div id="deriving-marginal-probabilities-proportions-from-a-two-way-table" class="section level3" number="7.3.1">
<h3>
<span class="header-section-number">7.3.1</span> Deriving Marginal probabilities/ proportions from a two-way table<a class="anchor" aria-label="anchor" href="#deriving-marginal-probabilities-proportions-from-a-two-way-table"><i class="fas fa-link"></i></a>
</h3>
<p>Now that we have the counts, it is easy for R to find the marginal probabilities from the table. Just pass the entire <code><a href="https://rdrr.io/r/base/table.html">table()</a></code> output into the <code>proportions</code> command.</p>
<div class="sourceCode" id="cb170"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/proportions.html">proportions</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">diamonds</span><span class="op">$</span><span class="va">cut</span>, <span class="va">diamonds</span><span class="op">$</span><span class="va">color</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre style="max-height: 150px; font-size:10px;"><code>##            
##                    D        E        F        G        H
##   Fair      0.003022 0.004153 0.005784 0.005821 0.005617
##   Good      0.012273 0.017297 0.016852 0.016148 0.013014
##   Very Good 0.028050 0.044494 0.040119 0.042621 0.033815
##   Premium   0.029718 0.043326 0.043215 0.054208 0.043752
##   Ideal     0.052540 0.072358 0.070931 0.090545 0.057749
##            
##                    I        J
##   Fair      0.003244 0.002206
##   Good      0.009677 0.005692
##   Very Good 0.022321 0.012570
##   Premium   0.026474 0.014980
##   Ideal     0.038802 0.016611</code></pre>
<script>
  iFrameResize({}, ".interactive");
</script>
</div>
</div>
</div>



  <div class="chapter-nav">
<div class="prev"><a href="summarizing-and-visualizing-data-exercises.html">🛠 Summarizing and Visualizing Data Exercises</a></div>
<div class="next"><a href="scatterplots-and-correlation.html"><span class="header-section-number">8</span> 📈 Scatterplots and Correlation</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>Chapter Contents</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#sampling-and-probability"><span class="header-section-number">7</span> 🎲 Sampling and Probability</a></li>
<li><a class="nav-link" href="#an-overview-on-probability"><span class="header-section-number">7.1</span> An overview on probability</a></li>
<li>
<a class="nav-link" href="#performing-simulations"><span class="header-section-number">7.2</span> Performing Simulations</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#carrying-out-simulations-in-r-using-sample"><span class="header-section-number">7.2.1</span> Carrying out simulations in R using sample()</a></li>
<li><a class="nav-link" href="#sampling-from-a-table-using-slice_sample"><span class="header-section-number">7.2.2</span> Sampling from a table using slice_sample()</a></li>
<li><a class="nav-link" href="#repeating-trials"><span class="header-section-number">7.2.3</span> Repeating Trials</a></li>
<li><a class="nav-link" href="#simulations-practice"><span class="header-section-number">7.2.4</span> Simulations Practice</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#tabluating-using-two-way-tables"><span class="header-section-number">7.3</span> Tabluating using Two-Way Tables</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#deriving-marginal-probabilities-proportions-from-a-two-way-table"><span class="header-section-number">7.3.1</span> Deriving Marginal probabilities/ proportions from a two-way table</a></li></ul>
</li>
</ul>
      <div class="book-extra" hidden>
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/kaisamng/RGuides/blob/main/08-Sampling-and-Probability.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/kaisamng/RGuides/edit/main/08-Sampling-and-Probability.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container">
    <div class="row">
      <div class="col-12 col-md-6 mt-3">
        <font size="+2"><strong>Mr. Ng</strong></font>
        <br>📍 Hopper Commons, Room 229
        <br><img style="vertical-align:middle; filter: invert(1); height: 1em; padding-right: 5px;" src="https://tjhsst.fcps.edu/sites/default/files/TJ%20LogoTransparent.png"><a class="text-light" href="https://tjhsst.fcps.edu" target="_blank" rel="noopener">Thomas Jefferson High School for Science and Technology</a>
          <br><strong>✉️ Email: </strong><a class="text-light" href="mailto:kng@fcps.edu"> kng@fcps.edu (before 5 PM please)</a> 
          <br><strong> 🕒 Office Hours:</strong> Fridays, 8A and 8B
        </div>
        <div class="col-12 col-md-6 mt-3">
          <br><strong>Other Links:</strong>
          <br><img style="vertical-align:middle; height: 1em; padding-right: 5px; filter: invert(1) brightness(0);" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9Ijg2cHgiIGhlaWdodD0iNzBweCIgdmlld0JveD0iMCAwIDg2IDcwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPGcgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgc3Ryb2tlPSIjNDg0ODQ4IiBzdHJva2Utd2lkdGg9IjYiPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI0MyIgY3k9IjM1IiByPSIyOSI+PC9jaXJjbGU+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik00Myw2IEw0Myw2NCI+PC9wYXRoPgogICAgICAgICAgICA8cGF0aCBkPSJNNDMsNjEgTDc3LDYgTDksNiBMNDMsNjEgWiI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+Cg=="><a class="text-light" href="https://ion.tjhsst.edu" target="_blank" rel="noopener">ION</a>
          <br><img style="vertical-align:middle; height: 1em; padding-right: 5px;" src="https://asset-cdn.schoology.com/sites/all/themes/schoology_theme/favicon.ico"><a class="text-light" href="https://lms.fcps.edu" target="_blank" rel="noopener">Schoology</a>
          <br><br><small><strong>Intro to R @ TJ</strong> was written by Kai Sam Ng. It was last built on 14 December, 2022. <br>This book was built by the <a class="text-light" href="https://bookdown.org" target="_blank" rel="noopener">bookdown</a> R package.</small>
</div>

</div>
</div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Wrangling Data | Intro to R @ TJ</title>
<meta name="author" content="Kai Sam Ng">
<meta name="description" content="No, not the kind of wrangling on the left (although that IS the original definition of “wrangling”). When we talk about data wrangling, we are speaking of the process of transforming data so that...">
<meta name="generator" content="bookdown 0.27.3 with bs4_book()">
<meta property="og:title" content="Wrangling Data | Intro to R @ TJ">
<meta property="og:type" content="book">
<meta property="og:description" content="No, not the kind of wrangling on the left (although that IS the original definition of “wrangling”). When we talk about data wrangling, we are speaking of the process of transforming data so that...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Wrangling Data | Intro to R @ TJ">
<meta name="twitter:description" content="No, not the kind of wrangling on the left (although that IS the original definition of “wrangling”). When we talk about data wrangling, we are speaking of the process of transforming data so that...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link rel="apple-touch-icon" sizes="180x180" href="resources/images/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="resources/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="resources/images/favicon-16x16.png">
<link rel="manifest" href="resources/images/site.webmanifest">
<meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)">
<style>
    #content {
        font-size: 0.98rem;
    }
    </style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/iframe-resizer/3.5.16/iframeResizer.min.js" type="text/javascript"></script><link href="https://cdn.jsdelivr.net/gh/hung1001/font-awesome-pro-v6@18657a9/css/all.min.css" rel="stylesheet" type="text/css">
<style>
    .interactive {
      position: relative;
    }  
    .interactive iframe {
      position: relative;
      z-index: 100;
      border: 0;
      width: 1px;
      min-width: 100%;
    }
    </style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Intro to R @ TJ</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">🏠 Homepage</a></li>
<li class="book-part">Getting Started</li>
<li><a class="" href="installing-r-and-rstudio.html">⬇️ Installing R and RStudio</a></li>
<li><a class="" href="interacting-with-r-studio.html">🖥 Interacting with R Studio</a></li>
<li class="book-part">Working with Data</li>
<li><a class="" href="vectors.html"><span class="header-section-number">1</span> 📑 Vectors</a></li>
<li><a class="" href="dataframe.html"><span class="header-section-number">2</span> 🔢 Creating Dataframes</a></li>
<li><a class="" href="selecting-and-filtering-data.html"><span class="header-section-number">3</span> 👆 Selecting and Filtering Data</a></li>
<li><a class="" href="creating-new-data.html"><span class="header-section-number">4</span> ✨ Creating New Data</a></li>
<li><a class="" href="vectors-and-dataframe-exercises.html">🛠 Vectors and Dataframe Exercises</a></li>
<li class="book-part">Presenting Data</li>
<li><a class="" href="summarizing-data.html"><span class="header-section-number">5</span> 📚 Summarizing Data</a></li>
<li><a class="" href="visualizing-one-variable-data.html"><span class="header-section-number">6</span> 👀 Visualizing One-Variable Data</a></li>
<li><a class="" href="summarizing-and-visualizing-data-exercises.html">🛠 Summarizing and Visualizing Data Exercises</a></li>
<li class="book-part">Sampling and Probability</li>
<li><a class="" href="sampling-and-probability.html"><span class="header-section-number">7</span> 🎲 Sampling and Probability</a></li>
<li class="book-part">Two-Variable Data: Scatterplots and Regression</li>
<li><a class="" href="scatterplots-and-correlation.html"><span class="header-section-number">8</span> 📈 Scatterplots and Correlation</a></li>
<li><a class="" href="linear-regression.html"><span class="header-section-number">9</span> 🔮 Linear Regression</a></li>
<li><a class="" href="linear-regression-exercises.html">Linear Regression Exercises 🛠</a></li>
<li class="book-part">Sampling Distributions and Confidence Intervals</li>
<li><a class="" href="z-scores-and-the-normal-distribution.html"><span class="header-section-number">10</span> Z-Scores and the Normal Distribution</a></li>
<li><a class="" href="the-central-limit-theorem.html"><span class="header-section-number">11</span> 🎯 The Central Limit Theorem</a></li>
<li><a class="" href="one-proportion-z-interval-for-hatp.html"><span class="header-section-number">12</span> 1️⃣『』 One Proportion Z-Interval for \(\hat{p}\)</a></li>
<li><a class="" href="one-sample-t-interval-for-mu.html"><span class="header-section-number">13</span> 1️⃣『』 One Sample t-Interval for \(\mu\)</a></li>
<li class="book-part">Significance Tests</li>
<li><a class="" href="one-proportion-z-test-for-proportions.html"><span class="header-section-number">14</span> 1️⃣ One Proportion Z-Test for Proportions</a></li>
<li><a class="" href="one-sample-t-test-for-means.html"><span class="header-section-number">15</span> 1️⃣ One-Sample t-test for Means</a></li>
<li><a class="" href="two-sample-confidence-intervals-and-significance-tests.html"><span class="header-section-number">16</span> 2️⃣ Two Sample Confidence Intervals and Significance Tests</a></li>
<li><a class="" href="one-way-anova.html"><span class="header-section-number">17</span> One-Way ANOVA</a></li>
<li class="book-part">Miscellaneous</li>
<li><a class="" href="deciphering-common-r-errors.html">😥 Deciphering Common R Errors</a></li>
<li><a class="active" href="wrangling-data.html">Wrangling Data</a></li>
<li><a class="" href="downloading-data-from-the-census-bureau.html">📲️ Downloading Data from the Census Bureau</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/kaisamng/RGuides">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="wrangling-data" class="section level1 unnumbered">
<h1>Wrangling Data<a class="anchor" aria-label="anchor" href="#wrangling-data"><i class="fas fa-link"></i></a>
</h1>
<div class="rmd2fr1fr">
<div>
<p>No, not the kind of wrangling on the left (although that IS the original definition of “wrangling”).</p>
<p>When we talk about data wrangling, we are speaking of the process of transforming data so that it becomes easier for us to analyze and process. Even though data exists everywhere and is easily available, most of the time, it will not be given to you in a format that is easily analyzable.</p>
</div>
<div>
<div class="inline-figure"><img src="resources/images/B-Data-Wrangling/bull_wrangling.png" width="100%" style="display: block; margin: auto;"></div>
</div>
</div>
<p>Some examples of this include:</p>
<ul>
<li><p>The data is in the wrong format– like being in Fahrenheit for temperature instead of Celsius.</p></li>
<li><p>The data has <code>NA</code>s or is missing.</p></li>
<li><p>The data has typos and errors.</p></li>
<li><p>The data is in wide format and you need long format data, or vice versa.</p></li>
</ul>
<p>In all cases, you want to process the data so that it is usable for yourself. What “usable” will depend not only on your project’s needs, but also your personal preference. As a result, rather than write a second textbook, an example is included below for a two-sample t-test.</p>
<div id="loading-data" class="section level2 unnumbered">
<h2>Loading Data<a class="anchor" aria-label="anchor" href="#loading-data"><i class="fas fa-link"></i></a>
</h2>
<p>The data I’m using here is the <a href="https://www.kaggle.com/datasets/CooperUnion/anime-recommendations-database">Anime Recommendations Database from kaggle</a>. It encompasses individual ratings of 12.294 anime made by 73,516 users. I downloaded the data and placed it in my R working directory.</p>
<p>The data that I’ve downloaded is currently in a CSV file. I’m going to use the function File&gt;&gt; Import Dataset &gt;&gt; from base (readr) option.</p>
<p>When it first gets loaded, I want certain columns to be treated as numeric vectors. The code is below.</p>
<div class="sourceCode" id="cb252"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org">readr</a></span><span class="op">)</span></span>
<span><span class="va">anime</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"resources/data/anime.csv"</span>, col_types <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/cols.html">cols</a></span><span class="op">(</span>MAL_ID <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number</a></span><span class="op">(</span><span class="op">)</span>, Score <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number</a></span><span class="op">(</span><span class="op">)</span>, Episodes <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number</a></span><span class="op">(</span><span class="op">)</span>, Popularity <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number</a></span><span class="op">(</span><span class="op">)</span>, Members <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number</a></span><span class="op">(</span><span class="op">)</span>, Favorites <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number</a></span><span class="op">(</span><span class="op">)</span>, Watching <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number</a></span><span class="op">(</span><span class="op">)</span>, Completed <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number</a></span><span class="op">(</span><span class="op">)</span>, `On-Hold` <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number</a></span><span class="op">(</span><span class="op">)</span>, Dropped <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number</a></span><span class="op">(</span><span class="op">)</span>,`Plan to Watch` <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number</a></span><span class="op">(</span><span class="op">)</span>, `Score-10` <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number</a></span><span class="op">(</span><span class="op">)</span>, `Score-9` <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number</a></span><span class="op">(</span><span class="op">)</span>, `Score-8` <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number</a></span><span class="op">(</span><span class="op">)</span>, `Score-7` <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number</a></span><span class="op">(</span><span class="op">)</span>, `Score-6` <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number</a></span><span class="op">(</span><span class="op">)</span>, `Score-5` <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number</a></span><span class="op">(</span><span class="op">)</span>, `Score-4` <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number</a></span><span class="op">(</span><span class="op">)</span>, `Score-3` <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number</a></span><span class="op">(</span><span class="op">)</span>, `Score-2` <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number</a></span><span class="op">(</span><span class="op">)</span>,`Score-1` <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">col_number</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## Warning: One or more parsing issues, see `problems()` for details</code></pre>
</div>
<div id="data-wrangling" class="section level2 unnumbered">
<h2>Data Wrangling<a class="anchor" aria-label="anchor" href="#data-wrangling"><i class="fas fa-link"></i></a>
</h2>
<p>Examine any problems with the dataset. Notice that there are a lot of random places where we treated a column as a numeric vector, but the actual data value was “Unknown” instead. R will convert the value to “NA,” which is fine with us.</p>
<div class="sourceCode" id="cb254"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://readr.tidyverse.org/reference/problems.html">problems</a></span><span class="op">(</span><span class="va">anime</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 16,570 × 5
##      row   col expected actual  file                                                   
##    &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;                                                  
##  1    13     8 a number Unknown /Users/kaisamng/Github/RGuides/resources/data/anime.csv
##  2   213     8 a number Unknown /Users/kaisamng/Github/RGuides/resources/data/anime.csv
##  3   873     8 a number Unknown /Users/kaisamng/Github/RGuides/resources/data/anime.csv
##  4  1095     8 a number Unknown /Users/kaisamng/Github/RGuides/resources/data/anime.csv
##  5  1267    33 a number Unknown /Users/kaisamng/Github/RGuides/resources/data/anime.csv
##  6  1406     3 a number Unknown /Users/kaisamng/Github/RGuides/resources/data/anime.csv
##  7  1506     3 a number Unknown /Users/kaisamng/Github/RGuides/resources/data/anime.csv
##  8  1580     3 a number Unknown /Users/kaisamng/Github/RGuides/resources/data/anime.csv
##  9  1580    34 a number Unknown /Users/kaisamng/Github/RGuides/resources/data/anime.csv
## 10  1701     3 a number Unknown /Users/kaisamng/Github/RGuides/resources/data/anime.csv
## # … with 16,560 more rows</code></pre>
<div class="sourceCode" id="cb256"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">anime</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 35
##   MAL_ID Name   Score Genders `English name` `Japanese name` Type  Episodes Aired Premiered
##    &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;          &lt;chr&gt;           &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    
## 1      1 Cowbo…  8.78 Action… Cowboy Bebop   カウボーイビバ… TV          26 Apr … Spring 1…
## 2      5 Cowbo…  8.39 Action… Cowboy Bebop:… カウボーイビバ… Movie        1 Sep … Unknown  
## 3      6 Trigun  8.24 Action… Trigun         トライガン      TV          26 Apr … Spring 1…
## 4      7 Witch…  7.27 Action… Witch Hunter … Witch Hunter R… TV          26 Jul … Summer 2…
## 5      8 Bouke…  6.98 Advent… Beet the Vand… 冒険王ビィト    TV          52 Sep … Fall 2004
## 6     15 Eyesh…  7.95 Action… Unknown        アイシールド21  TV         145 Apr … Spring 2…
## # … with 25 more variables: Producers &lt;chr&gt;, Licensors &lt;chr&gt;, Studios &lt;chr&gt;, Source &lt;chr&gt;,
## #   Duration &lt;chr&gt;, Rating &lt;chr&gt;, Ranked &lt;chr&gt;, Popularity &lt;dbl&gt;, Members &lt;dbl&gt;,
## #   Favorites &lt;dbl&gt;, Watching &lt;dbl&gt;, Completed &lt;dbl&gt;, `On-Hold` &lt;dbl&gt;, Dropped &lt;dbl&gt;,
## #   `Plan to Watch` &lt;dbl&gt;, `Score-10` &lt;dbl&gt;, `Score-9` &lt;dbl&gt;, `Score-8` &lt;dbl&gt;,
## #   `Score-7` &lt;dbl&gt;, `Score-6` &lt;dbl&gt;, `Score-5` &lt;dbl&gt;, `Score-4` &lt;dbl&gt;, `Score-3` &lt;dbl&gt;,
## #   `Score-2` &lt;dbl&gt;, `Score-1` &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb258"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">anime</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  [1] "MAL_ID"        "Name"          "Score"         "Genders"       "English name" 
##  [6] "Japanese name" "Type"          "Episodes"      "Aired"         "Premiered"    
## [11] "Producers"     "Licensors"     "Studios"       "Source"        "Duration"     
## [16] "Rating"        "Ranked"        "Popularity"    "Members"       "Favorites"    
## [21] "Watching"      "Completed"     "On-Hold"       "Dropped"       "Plan to Watch"
## [26] "Score-10"      "Score-9"       "Score-8"       "Score-7"       "Score-6"      
## [31] "Score-5"       "Score-4"       "Score-3"       "Score-2"       "Score-1"</code></pre>
<p>If you look, for some reason the “Genres” column is named “Genders.” Let’s rename to “Genres.”</p>
<div class="sourceCode" id="cb260"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">anime</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">anime</span><span class="op">)</span><span class="op">==</span><span class="st">"Genders"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Genres"</span></span></code></pre></div>
<p>Verify that the column names are now correct.</p>
<pre><code>##  [1] "MAL_ID"        "Name"          "Score"         "Genres"        "English name" 
##  [6] "Japanese name" "Type"          "Episodes"      "Aired"         "Premiered"    
## [11] "Producers"     "Licensors"     "Studios"       "Source"        "Duration"     
## [16] "Rating"        "Ranked"        "Popularity"    "Members"       "Favorites"    
## [21] "Watching"      "Completed"     "On-Hold"       "Dropped"       "Plan to Watch"
## [26] "Score-10"      "Score-9"       "Score-8"       "Score-7"       "Score-6"      
## [31] "Score-5"       "Score-4"       "Score-3"       "Score-2"       "Score-1"</code></pre>
<p>Save the new file as a R dataframe.</p>
<div class="sourceCode" id="cb262"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span><span class="op">(</span><span class="va">anime</span>, file<span class="op">=</span><span class="st">"resources/data/anime.RData"</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="isolate-the-variables-of-interest" class="section level2 unnumbered">
<h2>Isolate the variables of interest<a class="anchor" aria-label="anchor" href="#isolate-the-variables-of-interest"><i class="fas fa-link"></i></a>
</h2>
<p>This uses subsets all rows within the anime dataframe based on the condition in the brackets, and then saves it into a new dataframe called action_anime. The condition is satifised with the “grep” function, which will search for any character string and return “TRUE” if it contains “Action” within the column anime$Genres.</p>
<div class="sourceCode" id="cb263"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">action_anime</span><span class="op">&lt;-</span> <span class="va">anime</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grep</a></span><span class="op">(</span><span class="st">"Action"</span>, <span class="va">anime</span><span class="op">$</span><span class="va">Genres</span><span class="op">)</span>, <span class="op">]</span></span></code></pre></div>
<p>View the dataframe. How many animes do you recognize?</p>
<div class="sourceCode" id="cb264"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">action_anime</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 35
##   MAL_ID Name    Score Genres `English name` `Japanese name` Type  Episodes Aired Premiered
##    &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;          &lt;chr&gt;           &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    
## 1      1 Cowboy…  8.78 Actio… Cowboy Bebop   カウボーイビバ… TV          26 Apr … Spring 1…
## 2      5 Cowboy…  8.39 Actio… Cowboy Bebop:… カウボーイビバ… Movie        1 Sep … Unknown  
## 3      6 Trigun   8.24 Actio… Trigun         トライガン      TV          26 Apr … Spring 1…
## 4      7 Witch …  7.27 Actio… Witch Hunter … Witch Hunter R… TV          26 Jul … Summer 2…
## 5     15 Eyeshi…  7.95 Actio… Unknown        アイシールド21  TV         145 Apr … Spring 2…
## 6     18 Initia…  8.15 Actio… Unknown        頭文字〈イニシ… TV          24 Apr … Spring 2…
## # … with 25 more variables: Producers &lt;chr&gt;, Licensors &lt;chr&gt;, Studios &lt;chr&gt;, Source &lt;chr&gt;,
## #   Duration &lt;chr&gt;, Rating &lt;chr&gt;, Ranked &lt;chr&gt;, Popularity &lt;dbl&gt;, Members &lt;dbl&gt;,
## #   Favorites &lt;dbl&gt;, Watching &lt;dbl&gt;, Completed &lt;dbl&gt;, `On-Hold` &lt;dbl&gt;, Dropped &lt;dbl&gt;,
## #   `Plan to Watch` &lt;dbl&gt;, `Score-10` &lt;dbl&gt;, `Score-9` &lt;dbl&gt;, `Score-8` &lt;dbl&gt;,
## #   `Score-7` &lt;dbl&gt;, `Score-6` &lt;dbl&gt;, `Score-5` &lt;dbl&gt;, `Score-4` &lt;dbl&gt;, `Score-3` &lt;dbl&gt;,
## #   `Score-2` &lt;dbl&gt;, `Score-1` &lt;dbl&gt;</code></pre>
<p>We’re interested in how people rated these animes. Let’s calculate the score column for each.</p>
<div class="sourceCode" id="cb266"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">action_anime</span><span class="op">$</span><span class="va">Score</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 6.751</code></pre>
<div class="sourceCode" id="cb268"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">anime</span><span class="op">$</span><span class="va">Score</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 6.51</code></pre>
<p>Interesting! Let’s isolate the score columns from both dataframes and store them as separate vectors.</p>
<div class="sourceCode" id="cb270"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">anime_score</span><span class="op">&lt;-</span> <span class="va">anime</span><span class="op">$</span><span class="va">Score</span></span>
<span><span class="va">action_anime_score</span> <span class="op">&lt;-</span> <span class="va">action_anime</span><span class="op">$</span><span class="va">Score</span></span></code></pre></div>
</div>
<div id="graph-boxplots" class="section level2 unnumbered">
<h2>Graph boxplots<a class="anchor" aria-label="anchor" href="#graph-boxplots"><i class="fas fa-link"></i></a>
</h2>
<p>It looks like the average rating for action animes is indeed higher than the average rating for all animes. But by how much? To answer this question, let’s first graph a boxplot.</p>
<div class="sourceCode" id="cb271"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html">boxplot</a></span><span class="op">(</span><span class="va">anime_score</span>, <span class="va">action_anime_score</span>, </span>
<span>        ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">10</span><span class="op">)</span>,</span>
<span>        main<span class="op">=</span> <span class="st">"Boxplot comparison of All Anime vs. Action Anime"</span>,</span>
<span>        xlab<span class="op">=</span> <span class="st">"Rating"</span>,</span>
<span>        names<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Anime"</span>, <span class="st">"Action Anime"</span><span class="op">)</span>,</span>
<span>        col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Red"</span>, <span class="st">"Green"</span><span class="op">)</span>,</span>
<span>        horizontal<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/boxplot%20anime-1.png" width="100%" style="display: block; margin: auto;"></div>
</div>
<div id="run-a-two-sample-t-test." class="section level2" number="17.7">
<h2>
<span class="header-section-number">17.7</span> Run a Two Sample T-Test.<a class="anchor" aria-label="anchor" href="#run-a-two-sample-t-test."><i class="fas fa-link"></i></a>
</h2>
<p>Based on the boxplots, it looks like there’s a difference. Action animes appear to be rated higher than the rest. That means:</p>
<ul>
<li><p>Our null hypothesis is that there is no difference between the two averages, so u1 - u2 =0.</p></li>
<li><p>Our alternative hypothesis is that there <strong>is</strong> a difference between two averages, specifically that the average rating for all animes is lower than the average rating for action animes.</p></li>
</ul>
<p>Set the alternative hypothesis to be that the true average score of all animes is LOWER than the true average score for action animes.</p>
<div class="sourceCode" id="cb272"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">action_t_test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/t.test.html">t.test</a></span><span class="op">(</span><span class="va">anime_score</span>, <span class="va">action_anime_score</span>, alternative<span class="op">=</span> <span class="st">"less"</span>, var.equal<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>View the results.</p>
<pre><code>## 
##  Two Sample t-test
## 
## data:  anime_score and action_anime_score
## t = -14, df = 15731, p-value &lt;2e-16
## alternative hypothesis: true difference in means is less than 0
## 95 percent confidence interval:
##     -Inf -0.2125
## sample estimates:
## mean of x mean of y 
##     6.510     6.751</code></pre>
<p>Wow! There’s a serious difference. Look at the p-value for that. Now we need to graph this.</p>
</div>
<div id="graph-the-t-distribution-and-test-statistic." class="section level2" number="17.8">
<h2>
<span class="header-section-number">17.8</span> Graph the t-distribution and test statistic.<a class="anchor" aria-label="anchor" href="#graph-the-t-distribution-and-test-statistic."><i class="fas fa-link"></i></a>
</h2>
<p>Let’s start by:</p>
<ol style="list-style-type: decimal">
<li><p>storing the degrees of freedom in a variable called action_t_test.</p></li>
<li><p>creating an x-axis and store it as a variable called <strong>t_d_st_x_axis</strong>. This is the equivalent of drawing tick marks everywhere on a graph, but a ton of tick marks. We’re making a huge sequence 10^4 numbers long (so 10000 numbers) between -15.5 and 15.5. This helps fit in my massive test statistic of -14.34</p></li>
</ol>
<div class="sourceCode" id="cb274"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">action_t_test_df</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">anime_score</span><span class="op">)</span> <span class="op">+</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">action_anime_score</span><span class="op">)</span> <span class="op">-</span><span class="fl">2</span> <span class="co">#Recall how to calculate degrees of freedom.</span></span>
<span><span class="va">t_dist_x_axis</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">15.5</span>, <span class="fl">15.5</span>, length<span class="op">=</span> <span class="fl">10</span><span class="op">^</span><span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<p>Finally, plot. Notice here that for plot():</p>
<ul>
<li><p>the x-value is <strong>t_dist_x_axis</strong></p></li>
<li><p>the y-value is <strong>dt(t_dist_x_axis, df=action_t_test_df)</strong>. This generates a t-value for every value in <strong>t_dist_x_axis</strong>, so basically <em>f(x)</em>, with the degrees of greedom we set earlier.</p></li>
</ul>
<div class="sourceCode" id="cb275"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">t_dist_x_axis</span>, <span class="fu"><a href="https://rdrr.io/r/stats/TDist.html">dt</a></span><span class="op">(</span><span class="va">t_dist_x_axis</span>, df<span class="op">=</span><span class="va">action_t_test_df</span><span class="op">)</span>, </span>
<span>     type<span class="op">=</span><span class="st">'l'</span>, </span>
<span>     xlab<span class="op">=</span><span class="st">'t'</span>, </span>
<span>     ylab<span class="op">=</span><span class="st">''</span>,</span>
<span>     main<span class="op">=</span><span class="st">"The most ridiculous t-test graph ever"</span>,</span>
<span>     sub<span class="op">=</span><span class="st">"Look at that test statistic in the dotted line. Just look."</span><span class="op">)</span></span></code></pre></div>
<p>I want to show how ridiculous this is. We’re going to store the critical t* value of 0.01 in it’s own variable, and plot that with red lines.</p>
<div class="sourceCode" id="cb276"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">crit_t_value_0.01</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/TDist.html">qt</a></span><span class="op">(</span><span class="fl">0.01</span>, df<span class="op">=</span><span class="va">action_t_test_df</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html">abline</a></span><span class="op">(</span>v<span class="op">=</span><span class="va">crit_t_value_0.01</span>, col<span class="op">=</span><span class="st">'red'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html">abline</a></span><span class="op">(</span>v<span class="op">=</span><span class="op">-</span><span class="va">crit_t_value_0.01</span>, col<span class="op">=</span><span class="st">'red'</span><span class="op">)</span></span></code></pre></div>
<p>Finally, plot the test statistic, using a dotted line.</p>
<div class="sourceCode" id="cb277"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html">abline</a></span><span class="op">(</span>v<span class="op">=</span><span class="va">action_t_test</span><span class="op">$</span><span class="va">statistic</span>, lty<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="book_temp_files/figure-html/t-test%20plot2-1.png" width="100%" style="display: block; margin: auto;"></div>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="deciphering-common-r-errors.html">😥 Deciphering Common R Errors</a></div>
<div class="next"><a href="downloading-data-from-the-census-bureau.html">📲️ Downloading Data from the Census Bureau</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>Chapter Contents</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#wrangling-data">Wrangling Data</a></li>
<li><a class="nav-link" href="#loading-data">Loading Data</a></li>
<li><a class="nav-link" href="#data-wrangling">Data Wrangling</a></li>
<li><a class="nav-link" href="#isolate-the-variables-of-interest">Isolate the variables of interest</a></li>
<li><a class="nav-link" href="#graph-boxplots">Graph boxplots</a></li>
<li><a class="nav-link" href="#run-a-two-sample-t-test."><span class="header-section-number">17.7</span> Run a Two Sample T-Test.</a></li>
<li><a class="nav-link" href="#graph-the-t-distribution-and-test-statistic."><span class="header-section-number">17.8</span> Graph the t-distribution and test statistic.</a></li>
</ul>
      <div class="book-extra" hidden>
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/kaisamng/RGuides/blob/main/B-Data-Wrangling.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/kaisamng/RGuides/edit/main/B-Data-Wrangling.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container">
    <div class="row">
      <div class="col-12 col-md-6 mt-3">
        <font size="+2"><strong>Mr. Ng</strong></font>
        <br>📍 Hopper Commons, Room 229
        <br><img style="vertical-align:middle; filter: invert(1); height: 1em; padding-right: 5px;" src="https://tjhsst.fcps.edu/sites/default/files/TJ%20LogoTransparent.png"><a class="text-light" href="https://tjhsst.fcps.edu" target="_blank" rel="noopener">Thomas Jefferson High School for Science and Technology</a>
          <br><strong>✉️ Email: </strong><a class="text-light" href="mailto:kng@fcps.edu"> kng@fcps.edu (before 5 PM please)</a> 
          <br><strong> 🕒 Office Hours:</strong> Fridays, 8A and 8B
        </div>
        <div class="col-12 col-md-6 mt-3">
          <br><strong>Other Links:</strong>
          <br><img style="vertical-align:middle; height: 1em; padding-right: 5px; filter: invert(1) brightness(0);" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9Ijg2cHgiIGhlaWdodD0iNzBweCIgdmlld0JveD0iMCAwIDg2IDcwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPGcgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgc3Ryb2tlPSIjNDg0ODQ4IiBzdHJva2Utd2lkdGg9IjYiPgogICAgICAgICAgICA8Y2lyY2xlIGN4PSI0MyIgY3k9IjM1IiByPSIyOSI+PC9jaXJjbGU+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik00Myw2IEw0Myw2NCI+PC9wYXRoPgogICAgICAgICAgICA8cGF0aCBkPSJNNDMsNjEgTDc3LDYgTDksNiBMNDMsNjEgWiI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+Cg=="><a class="text-light" href="https://ion.tjhsst.edu" target="_blank" rel="noopener">ION</a>
          <br><img style="vertical-align:middle; height: 1em; padding-right: 5px;" src="https://asset-cdn.schoology.com/sites/all/themes/schoology_theme/favicon.ico"><a class="text-light" href="https://lms.fcps.edu" target="_blank" rel="noopener">Schoology</a>
          <br><br><small><strong>Intro to R @ TJ</strong> was written by Kai Sam Ng. It was last built on 15 August, 2022. <br>This book was built by the <a class="text-light" href="https://bookdown.org" target="_blank" rel="noopener">bookdown</a> R package.</small>
</div>

</div>
</div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
